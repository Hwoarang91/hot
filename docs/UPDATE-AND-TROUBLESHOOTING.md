# Руководство по устранению неполадок:
### Пожалуйста, следуйте этому руководству дополнительно к основным инструкциям, обучающим видео и документации перед созданием заявки в службу поддержки.

Перед тем как создать заявку, имейте в виду, что многие зарегистрированные проблемы часто связаны с распространёнными причинами, такими как блокировка GUI поисковыми запросами, использование устаревшего кода, выход из аккаунта Telegram или неправильное использование скрипта. Чтобы помочь нам эффективнее вам помочь и сократить время на поддержку, рекомендуем пройти все соответствующие шаги из этого руководства по устранению неполадок.

Время от времени игры обновляют свой графический интерфейс (GUI) или добавляют новые экраны и внутриигровые задания, что может потребовать корректировок в скрипте. В таких случаях будет полезно, если вы создадите заявку, чтобы мы были в курсе проблемы — в этом случае скриншоты проблемы всегда приветствуются.

> **Примечание:** Сейчас мы используем шаблон для направления пользователей к руководствам по самообслуживанию и устранению неполадок. При создании заявки обязательно чётко опишите, какие шаги вы уже предприняли. Заявки без доказательств выполнения данного руководства могут быть закрыты без дальнейших действий.

## Убедитесь, что ваш скрипт обновлён

Перед созданием заявки проверьте статус скрипта, с которым у вас возникли проблемы, используя [эту таблицу](https://github.com/thebrumby/HotWalletClaimer/blob/main/docs/LAUNCHCOMMANDS.md), чтобы убедиться, что нет известных ошибок и ваша локальная копия скрипта актуальна. Мы регулярно обновляем код, и если проблема затронула других пользователей, скорее всего, исправление уже выпущено. Использование устаревшей версии кода может привести к возникновению уже решённых проблем.

> **Примечание:** Установки на базе Docker автоматически подтягивают последний код каждые 12 часов. Однако, если в коде временно появилась ошибка, ваша установка могла автоматически загрузить неисправную версию до применения исправления. Ручная проверка актуальности перед созданием заявки сэкономит время вам и команде разработчиков.

### В Docker:
Убедитесь, что вы внутри контейнера, и выполните команду:
```
./pull-scripts.sh
```

### При автономной установке:
Перейдите в директорию **`HotWalletBot`** или в папку с локальной установкой с помощью команды смены каталога (`cd`), затем выполните:

```
git pull
```

## Проверьте GUI в Telegram Web (https://web.telegram.org/):
1. Используйте веб-версию Telegram, так как именно её использует скрипт. То, что игра работает в мобильном или десктопном приложении, не гарантирует её работу в веб-версии. Разработчики игр часто блокируют эту версию, чтобы препятствовать автоматическому сбору.
2. Работает ли игра корректно или находится на техническом обслуживании? Скрипт может взаимодействовать только с игрой, которая функционирует нормально и с которой могут взаимодействовать люди.
3. Присутствует ли проверка Cloudflare? Она часто блокирует скрипт при сборе наград, хотя иногда помогает выбор опции использования того же user agent, что и в GUI. Большинство игр, использующих Cloudflare, обычно отключают его через несколько недель (возможно, из-за стоимости).
4. Можете ли вы вручную инициировать сбор награды? В играх тоже бывают баги — проверьте, нет ли сообщений об ошибках при ручном сборе и отсутствует ли внутриигровая задержка. Иногда, например, в Hexacore, кажется, что вы кликаете по кубу, но после обновления экрана прогресс не сохраняется.
5. Есть ли что-то в строке поиска, что может блокировать скрипт от доступа к игровому окну?
6. Если ничего из вышеперечисленного не помогает, попробуйте удалить текущий чат с ботом в Telegram GUI и начать новый чат. Если вы используете сохранённую сессию Telegram, обновите её. Эти действия могут снять блокировки, мешающие работе скрипта.

## Убедитесь, что у вас достаточно средств на оплату Gas Fee
Игры, такие как Hot, Cold и Ocean/Sui, записывают ваши награды напрямую в блокчейн и расходуют небольшое количество базового токена сети в качестве комиссии за каждую транзакцию. Например, в случае Hot вы должны иметь более 0.1 NEAR, чтобы транзакция не была отклонена игрой. Это минимальное требование к балансу, чтобы покрыть стоимость транзакций. Хотя игра требует такого баланса, сеть снимет только стандартную комиссию за газ для каждой транзакции.

## Включите отладку:
1. Запустите скрипт с помощью **`./launch.sh`**, как при создании новой игровой сессии (более продвинутые пользователи могут напрямую редактировать настройки в **`variables.txt`**).
2. Включите опцию “Debug”, выбрав 'y'. Если редактируете variables.txt, установите **`"debugIsOn": true`**. Включение этой опции сохраняет пошаговые скриншоты ваших попыток сбора наград.
3. Перезапустите зависшую сессию:
```
pm2 restart [process name]
```
Пример:
```
pm2 restart HOT:Wallet1
# Или используйте паттерн
pm2 restart /Hot/
```
4. Откройте скриншоты через файловый браузер ShellNGN, панель проводника WinSCP или ваш предпочитаемый клиент для передачи файлов. Перейдите в папку установки, затем в директорию **`screenshots`** и далее в папку с именем вашей зависшей игровой сессии. Каждый сохранённый скриншот будет иметь префикс с номером шага, видимым в логах PM2.
5. Если вы используете Docker, самый простой способ просмотреть скриншоты — скопировать их в локальную файловую систему:
```
docker cp telegram-claim-bot:/usr/src/app/screenshots/ screenshots/
```
> Примечание: Скрипт взаимодействует с двумя основными сущностями: Telegram и Игрой. При просмотре скриншотов вы можете увидеть, что взаимодействия с Telegram отображаются корректно, а iFrame игры пуст. Это может означать, что игра офлайн или блокирует Telegram Web. Включение встроенного прокси может помочь скрипту выглядеть как приложение мобильного устройства в случае второй проблемы.

## Включите максимальную подробность логов:
1. Это покажет все шаги процесса, даже самые незначительные. Это может дать подсказки, почему и на каком шаге скрипт не работает.
2. Запустите скрипт, как при создании новой игровой сессии (более продвинутые пользователи могут напрямую редактировать настройки в **`variables.txt`**).
3. Установите **`verboseLevel`** в 3 (максимум) и перезапустите скрипты, как описано выше.

## Перезапустите зависшую игровую сессию:
1. Если вы ещё не перезапускали зависшую сессию, используйте команду Linux Process Manager 2 (PM2):
```
pm2 restart [process name]
```
2. Используйте команду просмотра логов PM2 (**`pm2 logs`**) или команду статуса (**`./launch.sh status`**) для мониторинга процесса на наличие ошибок при перезапуске.

## Обновите зависшую игровую сессию:
1. Запустите монитор статуса командой:
```
./launch.sh status
```
2. Удалите зависшую игровую сессию согласно инструкции: [STATUS.md](https://github.com/thebrumby/HotWalletClaimer/blob/main/docs/STATUS.md). Пример:
```
delete HOT:Wallet1
```
3. Используйте **`./launch.sh`** для создания игровой сессии заново.

Если ничего из вышеперечисленного не помогло, пожалуйста, создайте заявку в поддержку, приложив достаточное количество скриншотов и информации, чтобы мы могли помочь. Заявки без доказательств выполнения данного руководства могут быть закрыты без дальнейшего общения.

Предпочтительный язык поддержки — английский. Мы можем предоставить поддержку на других языках с помощью ChatGPT в роли переводчика. Однако для удобства всех участников и поскольку основной язык разработчика — английский, запросы на других языках могут быть закрыты без дальнейшего общения.

## Шаг 100 — отображается QR-код:
Если вы получаете ошибку, что QR-код всё ещё отображается, это значит, что сессия Telegram, которую вы использовали для настройки игровой сессии, была отозвана (в мобильном приложении: Настройки --> Устройства --> Завершить сессию). Чтобы исправить эту ошибку, вам нужно удалить сохранённую сессию Telegram вместе со всеми играми, созданными с её использованием, затем повторно аутентифицировать сессии Telegram и заново настроить игры.

## Встроенный прокси — должен работать для Blum, Vertus и некоторых других!
Встроенный прокси — это опциональная функция для большинства игр, но при включении он перехватывает данные между сессией браузера и игрой. Если установлен user-agent, соответствующий устройству iOS, прокси попытается переписать "tg-data", чтобы показать платформу как iOS-приложение (вместо десктопного браузера). Аналогично для Android — данные будут изменены, чтобы указывать на Android-приложение.

Если прокси используется, но user-agent не установлен, по умолчанию он имитирует Apple iPhone. Некоторые игры, например Blum, требуют использования прокси для подключения, даже если он отключён в настройках пользователя. В таких случаях прокси автоматически включается для корректной работы.

Если прокси упал, возможно, потребуется его сбросить, выполнив следующие команды:

```
pm2 delete http-proxy
pm2 save
apt install lsof
# или `sudo apt install lsof`, если вы на автономном Linux и требуется sudo
sudo lsof -i :8080
```

![image](https://github.com/user-attachments/assets/340039b3-0d28-4ede-a6ee-3e079b395148)

Если порт 8080 занят, найдите ID процесса (PID) и завершите его. Например, PID на скриншоте — 351071, но вам нужно подставить свой PID. Завершить процесс можно командой:

```
taskkill /PID 351071 /F
# или альтернативно используйте `kill` ниже. Возможно, потребуется sudo.
kill -9 351071
```

После этого перезапустите встроенный прокси:
```
./launch.sh enable-proxy
```

### Заключительная мысль:
Если у вас возникают трудности с настройкой зависимостей и требований для запуска скрипта, рассмотрите возможность использования Docker Desktop (на Windows или macOS) или Docker CLI (на VPS). [Настройка Docker](https://github.com/thebrumby/HotWalletClaimer/blob/main/docs/DOCKER.md) включает всё предустановленное и протестированное, что значительно упрощает запуск.

Если шаги по устранению неполадок не помогли и вы не нашли ответ в ранее закрытых вопросах, не стесняйтесь создавать заявку в поддержку. Однако учтите, что расплывчатые сообщения типа «не работает» без подробностей могут быть закрыты, заблокированы или удалены.