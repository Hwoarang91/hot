# Настройка ретрансляции из этого скрипта в Telegram-бот

## Шаг 1: Создайте Telegram-бота с помощью BotFather

1. **Найдите BotFather** в вашем Telegram-клиенте или используйте эту ссылку: [BotFather](https://t.me/botfather).

2. **Создайте нового бота**:
   - Начните чат с BotFather.
   - Введите команду `/newbot`.
   - Следуйте инструкциям, чтобы назвать вашего бота и задать уникальное имя пользователя.
   - **Скопируйте токен**, который предоставит BotFather. Этот токен будет использоваться для доступа к HTTP API вашего бота. **Храните токен в безопасности**, так как любой, у кого есть этот токен, сможет управлять вашим ботом.

3. **Отправьте сообщение вашему новому боту**:
   - Перейдите по URL вашего бота, который даст BotFather, например `https://t.me/myBotName_bot`.
   - Введите "Hello" и нажмите Enter, чтобы отправить сообщение. Это инициализирует чат, который будет использовать наш скрипт.

## Шаг 2: Настройте скрипт для работы с Telegram-ботом

4. **Запустите любую игру и выберите `y` для редактирования настроек**:
   - Например, выполните `./launch.sh hot`.
   - Пролистывайте опции, нажимая Enter, пока не дойдёте до пункта "Telegram verbose level".
   - Выберите уровень детализации от 0 (обновления не отправляются) до 3 (отправляются все мелкие шаги). Для большинства пользователей подходит уровень 1.
   - Продолжайте пролистывать, пока не дойдёте до "Enter the Telegram Bot Token" и введите токен доступа от BotFather.
   - Продолжайте нажимать Enter, пока не пройдёте все настройки и не увидите обновлённые параметры.
   - На этом этапе вы можете либо запустить новую игровую сессию, либо нажать Ctrl+C для выхода.
   - После выполнения этих шагов каждая игровая сессия, запущенная с обновлёнными настройками, будет отправлять обновления вашему боту.

5. **Настройте дополнительное взаимодействие с вашим Telegram-ботом**:
   - Запустите `./launch.sh tg-bot`, чтобы добавить дополнительный уровень взаимодействия между игровыми сессиями и Telegram-ботом.
   - Этот скрипт создаст процесс PM2 для мониторинга запросов от вас в Telegram.
   - После настройки вы сможете использовать команды, такие как `/start`, `/stop`, `/restart`, `/help`, `/status`, `/logs` и `/exit`, чтобы получать дополнительную информацию по каждой игровой сессии, выбирая ссылки из списка опций.

Следуя этим шагам, вы получите полностью настроенную ретрансляцию из вашего скрипта в Telegram-бот, что позволит получать обновления и взаимодействовать с игровыми сессиями через Telegram.

**Огромное спасибо участнику сообщества JBR1999 за разработку и вклад в этот код!**

### Доступные команды:

- `/start` — Запустить оригинального бота  
- `/logs <session name> <lines>` — Показать логи процесса  
  - `/logs HOT:Wallet1` — Показать последние 30 строк логов для игры "HOT", сессии "Wallet1".  
  - `/logs Vertus:Wallet2 100` — Показать последние 100 строк логов для игры "Vertus", сессии "Wallet2".  
- `/status` — Показать сводку статусов всех игровых сессий в PM2  
- `/status <session name>` — Получить последние 30 балансов и статусов для конкретной сессии  
  - `/status HOT:Wallet1` — Показать последние 30 результатов заявок и обновлений баланса для игры "HOT", сессии "Wallet1".  
- `/list` — Показать все активные и неактивные игры из PM2  
- `/list <pattern>` — Показать только игры, соответствующие шаблону  
  - `/list hot` — Показать все игры с "hot" в названии.  
- `/start <pattern>` — Запустить все процессы PM2, соответствующие шаблону  
  - `/start HOT:Wallet1` — Запустить сессию `HOT:Wallet1`.  
- `/restart <pattern>` — Перезапустить все процессы PM2, соответствующие шаблону  
  - `/restart :Wallet1` — Перезапустить все процессы PM2 для аккаунта `Wallet1`.  
- `/stop <pattern>` — Остановить процессы, соответствующие шаблону  
  - `/stop Vertus:` — Остановить все процессы PM2 для игры "Vertus".  
- `/update` — Обновить игровые файлы (попробуйте `pull-games.sh`, затем `git pull`).  
- `/help` — Показать это сообщение помощи.  
- `/exit` — Выйти из бота.

### Использование шаблонов в командах:

Вы можете использовать шаблоны в некоторых командах. При использовании `/list` поиск **не чувствителен к регистру**. Например, можно использовать `/list hot` или `/list vertus`. Однако для команд `/start`, `/restart` и `/stop` **регистр имеет значение**. Например:

- `/stop HOT:` остановит все игры HOT, независимо от имени аккаунта.  
- `/restart :Wallet1` перезапустит все сессии `Wallet1` во всех доступных играх.